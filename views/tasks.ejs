<!DOCTYPE html>
<html>
  <head>
    <title>My Memo - Tasks</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head> 
  <body>
    <% include header %>
    <div class="task-container-all">
        <div class="task-header-all">
            <h1>Tasks Left (Total)</h1>
        </div>
        <div class="task-content-all">
            <a href=# class="add-task">Add a task</a>
        </div>
    </div>
    <div class="task-container-day">
        <div class="task-header-day">
            <h1>Tasks For the Day</h1>
        </div>
        <div class="task-content-day">
            <a href=# class="add-task">Add a task</a>
         </div>
    </div>

    <!-- Add task modal -->
    <!-- How do I differentiate between day and all form? -->
    <!-- How should I set up my task model -->
    <div class="modal-container">
        <div class="add-task-container">

            <button class="close-form"><a href=#>X</a></button>
            <h2 class="center">Add a Task</h2>

            <form class="add-task-form">
                <label class="prettylabel">Title:</label><br/>
                <input class="form-element" type="text" name="title" placeholder="Title of Task" required/><br/>
                <label class="prettylabel">Description:</label><br/>
                <textarea class="form-element" id="task-desc" rows="5" cols="40" placeholder="Description (Optional)"></textarea><br/>
                <label class="prettylabel">Finish by:</label><br/>
                <input class="form-element" type="date" name="finishBy"/><br/>

                <input class="btn-form-submit" type="reset" value="Clear"/>
                <input class="btn-form-submit" type="submit" value="Add"/>
            </form>
        </div>

        <div class="modal-background"></div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script>
        $('.add-task').click(function(e) {
            $('.modal-container').addClass('show');
        });
        $('.modal-container').on('click', '.modal-background', function(e) {
            $('.modal-container').removeClass('show');
        });
        $(".add-task-container").on('click', '.close-form', function(e) {
			$('.modal-container').removeClass('show');
        });
        $(".add-task-form").submit(function(e) {
            e.preventDefault();
            var formData = {
                title   : $('input[name=title]').val(),
                content : $('#task-desc').val(),
                finishBy: $('input[name=finishBy').val()
            };
            $.ajax({
                method: 'POST',
                url:    '/tasks',
                data:   formData
            })
            .done(function(newTask) {
                $('.task-content-all').append('<p>Added a task.</p>');
                $('.modal-container').removeClass('show');
                clearTaskForm();
            })
            .fail(function(err) {
                console.log(err);
            });
        });

        var clearTaskForm = () => {
            $('input[name=title]').val('');
            $('#task-desc').val('');
            $('input[name=finishBy').val('');
        };
    </script>
  </body>
</html>